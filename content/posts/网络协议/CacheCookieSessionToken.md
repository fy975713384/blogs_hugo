---
title: 'Cache Cookie Session Token'
date: 2019-05-12T18:04:42+08:00
lastmod: 2019-05-12T18:04:42+08:00
tags: []
categories: []
authors:
  - 'wing'
draft: true
---

## Cache

### 浏览器缓存

浏览器缓存存储在本地，很多浏览器都有缓存设置选项，它可以将用户浏览过的网页全部保存到本地计算机硬盘中。当不希望使用浏览器缓存时，可以通过删除浏览历史记录将之删除。</br>
但由于客户端内存的限制，浏览器缓存并不能存放过多的数据，否则会降低机器自身的性能。

### 代理缓存

代理缓存既不属于客户端也不属于服务端，而是利用网络路由请求信息。代理缓存可以使用和浏览器缓存相同的原理及方法，服务于大规模的数据存储和更广泛的用户群。

### 网关缓存

通常由网站站长自己部署，可以让自己的网站更具可扩展性、可靠性和更好的性能。

## Cookie

### Cookie 简介

Cookie 是用户浏览网页时网站存储在用户机器上的小文本文件，文件里面记录了与用户相关的一些状态或者设置，比如用户名、ID、访问次数等，当用户下一次访问这个网站的时候，网站会先访问用户机器上对应的该网站的 Cookie 文件，并从中读取信息，以便用户实现快速访问。</br>
Cookie 具有不可跨域名性和不可跨浏览器性。

### Cookie 作用

使浏览器和 Web 系统可以对用户进行身份识别和会话跟踪。

### Cookie 类型

Cookie 具有时效性，可以再服务端人为设置为 1 分钟、1 天、1 个月，也可以设置在浏览器关闭的同时失效。</br>
_持久型 Cookie：_ 以文本形式存放在硬盘中，由浏览器读取。</br>
_临时型 Cookie：_ 也称为会话 Cookie，存储在内存中，关闭当前浏览器后会立即销毁。

### Cookie 常见属性

| 属性     | 作用                                           |
| -------- | ---------------------------------------------- |
| Domain   | 设置关联 Cookie 的域名                         |
| Expires  | 通过给定一个过期时间来创建一个持久化 Cookie    |
| HttpOnly | 用于避免 Cookie 被 JavaScript 访问             |
| Name     | Cookie 的名称                                  |
| Path     | 关联到 Cookie 的路径，默认为 /                 |
| Value    | 读写 Cookie 的值                               |
| Secure   | 用于指定 Cookie 需要通过安全 Socket 层连接传递 |

## Session

### Session 简介

Session 和 Cookie 最大的不同在于 Cookie 保存在浏览器或客户端文件中，Session 保存在服务端的内存中。服务器在把经过加密的用户信息存放在 Session 中的同时，会生成一个唯一的 session_id 放在 Cookie 中返回给客户端。

### Session 的传输媒介

1. 通过 Cookie 传输（传输的是 session_id）
2. 通过 URL 地址重写

### Session 的周期

Session 是基于访问的进程，记录了一个访问的开始到结束，当浏览器或进程关闭后，Session 也就“消失”了。

## JWT (JSON Web Token)

[什么是 JSON Web Token?](https://jwt.io/introduction/)

### JWT 简介

JWT 是目前最流行的跨域身份验证解决方案。

### JWT 的传递

Token 的传递通常放在 Cookie 中，但如果客户端不支持 Cookie，Token 也可单独放在请求头中。当跨域时，也可以将 JWT 被放置于 POST 请求的数据主体中。

### JWT 的问题

1. JWT 默认不加密，但可以加密。生成原始令牌后，可以使用改令牌再次对其进行加密。
2. 当 JWT 未加密方法是，一些私密数据无法通过 JWT 传输。
3. JWT 不仅可用于认证，还可用于信息交换。善用 JWT 有助于减少服务器请求数据库的次数。
4. JWT 的最大缺点是服务器不保存会话状态，所以在使用期间不可能取消令牌或更改令牌的权限。也就是说，一旦 JWT 签发，在有效期内将会一直有效。
5. JWT 本身包含认证信息，因此一旦信息泄露，任何人都可以获得令牌的所有权限。为了减少盗用，JWT 的有效期不宜设置太长。对于某些重要操作，用户在使用时应该每次都进行进行身份验证。
6. 为了减少盗用和窃取，JWT 不建议使用 HTTP 协议来传输代码，而是使用加密的 HTTPS 协议进行传输。

> 参考来源：
>
> - https://baijiahao.baidu.com/s?id=1608021814182894637&wfr=spider&for=pc
> - 《图解 HTTP》--上野 宣
